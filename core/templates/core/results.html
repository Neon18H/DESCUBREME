{% extends 'base.html' %}
{% block content %}
<div class="container py-5">
  <h2>{{ plan.title }}</h2>
  <p class="text-muted">{{ plan.city }} â€¢ Mood: {{ plan.mood }} â€¢ Presupuesto: ${{ plan.budget_cop }}</p>
  <div class="timeline mt-4">
    {% for step in plan.steps.all %}
      <div class="timeline-item glass-card p-3 mb-3">
        <span class="badge bg-secondary">{{ step.block|title }}</span>
        <h5 class="mt-2">{{ step.place_name }}</h5>
        <p class="mb-1">{{ step.description }}</p>
        <p class="mb-1"><strong>Por quÃ©:</strong> {{ step.why }}</p>
        <p class="mb-1">â± {{ step.est_time_minutes }} min â€¢ ğŸ’¸ ${{ step.est_cost_cop }}</p>
        <p class="mb-1">ğŸ“ {{ step.address }} {% if step.rating %}â€¢ â­ {{ step.rating }}{% endif %}</p>
        {% if step.maps_url %}<a href="{{ step.maps_url }}" target="_blank">Ver en Maps</a>{% endif %}
      </div>
    {% endfor %}
  </div>
  <div class="d-flex gap-2 mt-3">
    {% if not plan.is_saved %}
    <form method="post" action="{% url 'save_plan' plan.id %}">{% csrf_token %}<button class="btn btn-success">Guardar</button></form>
    {% else %}
    <button class="btn btn-secondary" disabled>Ya guardado</button>
    {% endif %}
    <a href="{% url 'generate_plan' %}" class="btn btn-outline-light">Generar otro plan</a>
  </div>
</div>
{% endblock %}
