{% extends 'base.html' %}
{% block title %}Mis planes{% endblock %}
{% block content %}
<section class="container pt-4">
  <ul class="nav nav-pills mb-3" id="plans-tab" role="tablist">
    <li class="nav-item"><button class="nav-link active" data-bs-toggle="pill" data-bs-target="#created">Creados</button></li>
    <li class="nav-item"><button class="nav-link" data-bs-toggle="pill" data-bs-target="#saved">Guardados</button></li>
  </ul>
  <div class="tab-content">
    <div class="tab-pane fade show active" id="created">
      <div class="row g-3">
        {% for plan in created_plans %}
          <div class="col-12 col-md-6">
            <div class="glass-card p-3">
              <h3 class="h5">{{ plan.title }}</h3>
              <p class="text-soft mb-2">{{ plan.city }} · {{ plan.created_at|date:'d M Y' }}</p>
              <div class="d-flex gap-2">
                <a href="{% url 'public_plan_detail' plan.id %}" class="btn btn-sm app-btn app-btn-secondary">Ver</a>
                <button class="btn btn-sm app-btn app-btn-primary js-toggle-public" data-plan-id="{{ plan.id }}">{% if plan.is_public %}Público{% else %}Compartir{% endif %}</button>
              </div>
            </div>
          </div>
        {% empty %}<p class="text-soft">No tienes planes creados.</p>{% endfor %}
      </div>
    </div>
    <div class="tab-pane fade" id="saved">
      <div class="row g-3">
        {% for plan in saved_plans %}
          <div class="col-12 col-md-6"><div class="glass-card p-3"><h3 class="h6">{{ plan.title }}</h3><a href="{% url 'public_plan_detail' plan.id %}">Ver plan</a></div></div>
        {% empty %}<p class="text-soft">No has guardado planes todavía.</p>{% endfor %}
      </div>
    </div>
  </div>
</section>
{% endblock %}
